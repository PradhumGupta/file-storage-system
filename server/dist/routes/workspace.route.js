import { Router } from "express";
import { WorkspaceController } from "../controllers/workspace.controller";
import { authenticate } from "../middleware/auth.middleware";
import { requireWorkspaceMember } from "../middleware/workspaceAuth.middleware";
import { checkAccess } from "../middleware/check-access.middleware";
const router = Router();
router.use(authenticate);
router.get("/", WorkspaceController.getUserWorkspaces);
router.post("/", WorkspaceController.createOrg);
router.get("/:workspaceId/list", requireWorkspaceMember, WorkspaceController.fetchWorkspace);
router.get("/:workspaceId/members", requireWorkspaceMember, WorkspaceController.members);
router.post("/:workspaceId/members", requireWorkspaceMember, checkAccess("workspace", "manage"), WorkspaceController.invite);
router.delete("/:workspaceId/members/:memberId", requireWorkspaceMember, checkAccess("workspace", "manage"), WorkspaceController.remove);
router.patch("/:workspaceId/members", requireWorkspaceMember, checkAccess("workspace", "manage"), WorkspaceController.changeRole);
router.get("/:workspaceId/other-users", requireWorkspaceMember, checkAccess("workspace", "manage"), WorkspaceController.getUsers);
export default router;
